<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css" />
    <script src="https://kit.fontawesome.com/8d3edbfe1f.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.0/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="../css/dash.css">
    <title>Document</title>
</head>

<body id="body">

    <header>
        <div class="icon_menu">
            <i class="fa-solid fa-bars" id="btn_open"></i>
        </div>
    </header>


    <div class="menu_side" id="menu_side">

        <div class="name_page">
            <!-- <h2>UNIVERSIDAD</h2> -->
        </div>

        <div class="option_menu">

            <a href="dash.html">
                <div class="option">
                    <i class="fa-solid fa-house-chimney" title="Inicio"></i>
                    <h4>Inicio</h4>
                </div>
            </a>

            <a href="crud.html">
                <div class="option">
                    <i class="fa-solid fa-screwdriver-wrench" title="Gestionar datos"></i>
                    <h4>Gestionar</h4>
                </div>
            </a>

            <a href="#" class="selected">
                <div class="option">
                    <i class="fa-solid fa-file-arrow-up" title="Subir notas"></i>
                    <h4>Subir notas</h4>
                </div>
            </a>

            <a href="materias.html">
                <div class="option">
                    <i class="fa-solid fa-address-book" title="Ver materias"></i>
                    <h4>Ver materias</h4>
                </div>
            </a>

            <a href="index.html">
                <div class="option">
                    <i class="fa-solid fa-right-from-bracket" title="Regresar al inicio"></i>
                    <h4>Salir</h4>
                </div>
            </a>
        </div>
    </div>



    <main>
        <div class="contenedor" style="margin-top: 6em;">
            <div class="row my-4" style="width: 70%; margin: 0 auto;">
                <h1 class="my-3">Ingreso de notas</h1>
                <button id="btn_subirNotas" type="button" class="btn btn-primary" data-bs-toggle="modal">Subir las
                    notas</button>
            </div>
            <div class="row" style="width: 70%; margin: 0 auto;">
                <div class="table-responsive" id="con_tabla_al">
                    <table id="alumnos" class="table table-dark table-striped mt-3">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ID Alumno</th>
                                <th>ID Materia</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row" style="width: 70%; margin: 0 auto;">
                <h2 class="py-5">Tabla de notas</h2>
                <div class="table-responsive" id="con_tabla_al">
                    <table id="notas" class="table table-dark table-striped mt-3">
                        <thead>
                            <tr>
                                <th>ID Alumno</th>
                                <th>Corte 1</th>
                                <th>Corte 2</th>
                                <th>Corte 3</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>






        <div class="contenedor" style="margin-top: 6em;">
            <div class="row my-4" style="width: 70%; margin: 0 auto;">
                <h1 class="my-3">Tomar asistencias</h1>
                <button id="btn_asistencias" type="button" class="btn btn-primary" data-bs-toggle="modal">Tomar asistencia</button>
            </div>
            <div class="row" style="width: 70%; margin: 0 auto;">
                <div class="table-responsive">
                    <table id="asistencias" class="table table-dark table-striped mt-3">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ID Alumno</th>
                                <th>Justificada</th>
                                <th>Injustificada</th>
                                <th>Observación</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody class="tbodyAsis">
                            <tr></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>


    <div class="modal fade" id="modalNotas" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h3 class="modal-title" id="exampleModalLabel">Notas</h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form class="formNotas">
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">ID alumno</label>
                            <input type="text" class="form-control" id="idAlumnoMateria">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Nota 3:</label>
                            <input type="number" class="form-control" id="notaDelCorte1" step=".01">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Nota 2:</label>
                            <input type="number" class="form-control" id="notaDelCorte2" step=".01">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Nota 3:</label>
                            <input type="number" class="form-control" id="notaDelCorte3" step=".01">
                        </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Crear</button>
                </div>
                </form>
            </div>
        </div>
    </div>



    <div class="modal fade" id="modalAsistencias" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h3 class="modal-title" id="exampleModalLabel">Asistencias</h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form class="formAsistencias">
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">ID alumno</label>
                            <input type="number" class="form-control" id="idAlumnoMateriaA">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">¿Asistnecia justificada? si/no</label>
                            <input type="number" class="form-control" id="inasistenciaJustificada">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">¿Asistnecia injustificada? si/no</label>
                            <input type="number" class="form-control" id="inasistenciaInjustificada" step=".01">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Observación:</label>
                            <input type="text" class="form-control" id="observacion" step=".01" onkeypress="return validarLetras(event)">
                        </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Crear</button>
                </div>
                </form>
            </div>
        </div>
    </div>



    <script src="../js/dash.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/dataTables.bootstrap5.min.js"></script>
    <script>

        $("#alumnos").DataTable({
            "ajax": {
                "url": 'http://localhost:7031/api/alumnos/',
                "type": "GET",
                "datatype": "json",
                "dataSrc": ""
            },
            "data": null,
            "columns": [
                { "data": "idAlumnoMateria" },
                { "data": "idAlumno" },
                { "data": "idMateria" }
            ]

        })

        $("#notas").DataTable({
            "ajax": {
                "url": 'http://localhost:7031/api/notas/',
                "type": "GET",
                "datatype": "json",
                "dataSrc": ""
            },
            "data": null,
            "columns": [
                { "data": "idAlumnoMateria" },
                { "data": "notaDelCorte1" },
                { "data": "notaDelCorte2" },
                { "data": "notaDelCorte3" }
            ]

        })


        $("#asistencias").DataTable({
            "ajax": {
                "url": 'http://localhost:7031/api/asistencias/',
                "type": "GET",
                "datatype": "json",
                "dataSrc": ""
            },
            "data": null,
            "columns": [
                { "data": "idAsistencias" },
                { "data": "idAlumnoMateria" },
                { "data": "inasistenciaJustificada" },
                { "data": "inasistenciaInjustificada" },
                { "data": "observacion" },
                {
                "data": null, "sortable": false, "autoWidth": true, "render": function (data, type, full) {
                    return `<a class="btnEditarAsis btn btn-primary text-tencer" href = "#">Editar</a>
                <a class= "btnBorrarAsis btn btn-danger text-tencer" href = "#">Eliminar</a>`;
                }
            }
            ]

        })
    </script>

<script>
    function validarLetras(e){
        key = e.keyCode || e.which;

        teclado = String.fromCharCode(key).toLowerCase();
        letras = ' abcdefghijklmnñopqrstuvwxyz';
        especiales = '8-37-38-46-164';

        tecladoEspecial = false;

        for (let i in especiales) {
            if (key==especiales[i]) {
                tecladoEspecial = true;
                break;
            }
        }

        if (letras.indexOf(teclado) == -1 && !tecladoEspecial) {
            return false;
        }
    }


    function validarSexo(e){
        key = e.keyCode || e.which;

        teclado = String.fromCharCode(key).toLowerCase();
        letras = 'fm';
        especiales = '8-37-38-46';

        tecladoEspecial = false;

        for (let i in especiales) {
            if (key==especiales[i]) {
                tecladoEspecial = true;
                break;
            }
        }

        if (letras.indexOf(teclado) == -1 && !tecladoEspecial) {
            return false;
        }
    }

</script>

    <script src="../js/notas.js"></script>
    <script src="../js/codeAsis.js"></script>
</body>

</html>